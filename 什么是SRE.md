#### 什么是SRE?

从这个视角出发，我们认为如果软件工程职业主要专注于设计和构建软件系统，那么应该有另外一种职业专注于整个软件系统的生命周期管理。从其设计一直到部署，历经不断改进，最后顺利退役。这样一种职业必须具备非常广泛的技能，但是和其他职业的专注点都不同。Google 将这个职位称为站点可靠性工程师（SRE,Site Reliability Engineering）。

极端来说，研发部门想要：“随时随地发布新功能，没有任何阻拦”，而运维部门则想要：“一旦一个东西在生产环境中正常工作了，就不要再进行任何改动。”由于两个部门使用的语境不同，对风险的定义也不一致。在现实生活中，公司内部这两股力量只能用最传统的政治斗争方式来保障各自的利益。运维团队常常宣称，任何变更上线前必须经过由运维团队制定的流程，这有助于避免事故的发生。例如：运维团队会列出一个非常长的检查清单，历数所有以前曾经出现过的生产事故，要求研发团队在上线任何功能之前必须将所有这些事故模拟一遍，确保不会重现。这个清单通常没有任何标准，每项事故的可重现程度、问题价值并不一定是一致的。而开发团队吃过苦头之后也很快找到了自己的应对办法：开发团队宣称他们不再进行大规模的程序更新，而是逐渐转为功能开关调整、增量更新，以及补丁化。采用这些名词的唯一目的，就是为了绕过运维部门设立的各种流程，从而能更快地上线新功能。

#### SRE的工作内容？

为了避免这一点，负责运维这个服务的团队必须有足够的时间编程，否则他们就会被运维工作所淹没。因此，Google为整个SRE团队所做的所有传统运维工作设立了一个50%的上限值。传统运维工作包括：工单处理、手工操作等。设立这样一个上限值确保了SRE团队有足够的时间改进所维护的服务，将其变得更稳定和更易于维护。这个上限值并不是目标值。随着时间推移，SRE团队应该倾向于将基本的运维工作全部消除，全力投入在研发任务上。因为整个系统应该可以自主运行，可以自动修复问题。我们的终极目标是推动整个系统趋向于无人化运行，而不仅仅是自动化某些人工流程。

#### SRE与DevOps?

我们可以认为DevOps是SRE核心理念的普适版，可以用于更广范围内的组织结构、管理结构和人员安排。同时，SRE是DevOps模型在Google的具体实践，带有一些特别的扩展。

#### 监控系统需要有哪些指标？

监控系统的4个黄金指标分别是延迟、流量、错误和饱和度（saturation）。如果我们只能监控用户可见系统的4个指标，那么就应该监控这4个。

#### 乏味是一种美德

与生活中的其他东西不同，对于软件而言，“乏味”实际上是非常正面的态度！我们不想要自发性的和有趣的程序；我们希望这些程序按设计执行，可以预见性地完成商业目标。Google工程师Robert Muth曾说过，“与侦探小说不同，缺少刺激、悬念和困惑是源代码的理想特性。”生产环境中的意外是SRE最大的敌人。

#### 最小 API

法国诗人 Antoine de Saint Exupery 曾写道，“不是在不能添加更多的时候，而是没有什么可以去掉的时候，才能达到完美。”

#### 基于时间序列的监控系统

近年来，监控系统也经历了一次类似神武纪生物系统大爆炸的爆发式增长：Riemann、Heka、Bosun、Prometheus 都是开源软件中与Borgmon 基于时间序列数据报警理念类似的系统。Prometheus[3]与Borgmon十分类似，尤其是当你对比其中的规则计算语法时。变量收集和规则计算的理念在所有这些项目中都很类似。

#### SRE文化

在SRE的文化中，最重要的就是事后总结“对事不对人”。一篇事后总结必须重点关注如何定位造成这次事件的根本问题，而不是指责某个人或某团队的错误或者不恰当的举动。一篇对事不对人的事后总结假设所有参与事件处理的人都是善意的，他们在自己当时拥有的信息下做了正确的举动。如果因为某些“错误的”举动就公开指责或者羞辱某个人或团队，那么人们就会自然地逃避事后总结。

SRE组织的一个指导思想是，团队大小不应该与用户服务规模成比例增长。在用户服务成指数增长的情况下，想要保持SRE团队以线性增长需要不断地进行自动化工具的开发，以及不停地优化工具、流程，消除一切其他日常运维相关的效率问题。在这种情况下，让有直接运维经验的人来开发对应的生产工具是非常合理的。

当出现问题时（由于Google内部环境的海量规模、复杂程度，以及非常高的变化速度，一定会有东西出现问题），详细考虑下列问题是很重要的：

- 究竟发生了什么
- 响应的有效程度
- 下次是否可以采用其他方案解决问题
- 如何确保这次故障不会再次发生

#### SRE需要什么人才？

SRE通常是通用型人才，这种广度优先而不是深度优先的学习方式使得SRE对全局知识掌握得很多（没有什么比现代技术基础架构设施的内在工作原理涉及面更广泛的了）。这些工程师通常有很强的编程能力和软件开发能力，但是很多人却没有很多传统软件开发工程师的工作经验。

Google SRE本质上还是软件工程师，他们对重复性的、被动性的工作十分反感。

#### BASE和ACID

很多云应用程序都是在基于ACID[87]和BASE[88]某种组合的API上不停地演变来满足上述5个要求的。[89]BASE 相比ACID来说，使用更软性的分布式一致性要求来换取更高的可用性。BASE仅仅保障在某一个数据停止更新之后，在不同的数据存储位置（可能是分布各地的）中达到“最终一致”。

[SRE：Google运维解密-贝特西·拜尔等-微信读书 (qq.com)](https://weread.qq.com/web/bookDetail/72c323007190dfe972c1295)

